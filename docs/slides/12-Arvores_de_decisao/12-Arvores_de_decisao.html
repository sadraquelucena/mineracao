<!DOCTYPE html>
<html lang="pt-BR"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.24">

  <meta name="author" content="Prof.&nbsp;Dr.&nbsp;Sadraque E. F. Lucena  sadraquelucena@academico.ufs.br   http://sadraquelucena.github.io/mineracao">
  <title>Minera√ß√£o de Dados ‚Äì √Årvores de Decis√£o</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-cff50d83f7a2c4b980ab54521e335385.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">√Årvores de Decis√£o</h1>
  <p class="subtitle">ESTAT0109 ‚Äì Minera√ß√£o de Dados em Estat√≠stica</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
<p>Prof.&nbsp;Dr.&nbsp;Sadraque E. F. Lucena<br> <span style="font-size:.8em;">sadraquelucena@academico.ufs.br</span> <br> <a href="http://sadraquelucena.github.io/mineracao" target="_blank" style="font-size:.8em;">http://sadraquelucena.github.io/mineracao</a></p> 
</div>
</div>
</div>

</section>
<section id="objetivo-da-aula" class="slide level2">
<h2>Objetivo da Aula</h2>
<ul>
<li>Compreender o funcionamento do algoritmo de √Årvores de Decis√£o.</li>
</ul>
</section>
<section id="introdu√ß√£o" class="slide level2">
<h2>Introdu√ß√£o</h2>
<ul>
<li>√Årvores de decis√£o s√£o m√©todos de classifica√ß√£o que usam a estrat√©gia <strong>dividir para conquistar</strong>.
<ul>
<li>O objetivo √© segmentar os dados em subgrupos menores at√© que eles sejam o mais homog√™neos poss√≠vel (pura separa√ß√£o).</li>
</ul></li>
</ul>
</section>
<section id="analogia-do-territ√≥rio" class="slide level2">
<h2>Analogia do Territ√≥rio</h2>
<ul>
<li><p>Imagine o conjunto de dados como um grande <em>territ√≥rio inexplorado</em>.</p>
<ul>
<li><p><strong>Dividir (Cerca):</strong> Escolhemos a caracter√≠stica mais informativa para tra√ßar uma ‚Äúcerca‚Äù, dividindo o territ√≥rio em peda√ßos menores.</p></li>
<li><p><strong>Conquistar (Avaliar):</strong> Em cada peda√ßo, verificamos se o grupo j√° √© uniforme. Se n√£o for, dividimos novamente.</p>
<ul>
<li>Exemplo: ‚Äú<em>Se horas de estudo &gt; 5 E frequ√™ncia &gt; 80%‚Ä¶</em>‚Äù (Caminhamos para um lado do mapa).</li>
</ul></li>
<li><p><strong>Rotular (Concluir):</strong> Quando n√£o vale mais a pena dividir, chegamos aos <strong>n√≥s terminais (folhas)</strong>. Ali, fincamos uma bandeira com a previs√£o final para aquela √°rea.</p></li>
</ul></li>
</ul>
</section>
<section id="√°rvores-de-decis√£o" class="slide level2">
<h2>√Årvores de Decis√£o</h2>
<ul>
<li>Modelos que utilizam uma estrutura hier√°rquica (fluxograma) para mapear rela√ß√µes entre preditores e resultados.</li>
<li>Tipos principais:
<ul>
<li><strong>√Årvore de Classifica√ß√£o:</strong> O resultado √© uma categoria (ex: Sim/N√£o, Risco Alto/Baixo).</li>
<li><strong>√Årvore de Regress√£o:</strong> O resultado √© um valor num√©rico cont√≠nuo (ex: Sal√°rio, Temperatura).</li>
</ul></li>
</ul>
</section>
<section id="anatomia-da-√°rvore" class="slide level2">
<h2>Anatomia da √Årvore</h2>
<ul>
<li><strong>N√≥ Raiz (Root Node):</strong> O topo da √°rvore. Representa a popula√ß√£o inteira antes de qualquer divis√£o.</li>
<li><strong>N√≥ de Decis√£o (Internal Node):</strong> Pontos onde o algoritmo faz uma pergunta aos dados (ex: ‚ÄúA renda √© maior que 5k?‚Äù).
<ul>
<li>Cada resposta cria um <strong>Ramo</strong> (Branch) que leva a um novo n√≥.</li>
</ul></li>
<li><strong>N√≥ Folha (Leaf Node):</strong> Os pontos terminais. Eles n√£o se dividem mais e cont√™m a decis√£o final (a previs√£o ou classifica√ß√£o).</li>
</ul>
</section>
<section id="√°rvores-de-decis√£o-1" class="slide level2">
<h2>√Årvores de Decis√£o</h2>

<img data-src="imagens/arvore.png" style="width:60.0%" class="r-stretch quarto-figure-center"><p class="caption">Exemplo de uma √°rvore de decis√£o.</p></section>
<section id="interpretabilidade-e-regras" class="slide level2">
<h2>Interpretabilidade e Regras</h2>
<ul>
<li>As √Årvores de Decis√£o s√£o modelos <strong>‚ÄúCaixa Branca‚Äù</strong>, ou seja, a l√≥gica interna √© transparente e pode ser lida por humanos.</li>
<li>A √°rvore pode ser convertida diretamente em um conjunto de regras <strong>SE-ENT√ÉO</strong> (IF-THEN rules). Exemplo:
<ul>
<li><strong>SE</strong> [Renda &lt; 2.000] <strong>E</strong> [Possui Fiador = N√£o]</li>
<li><strong>ENT√ÉO</strong> [Risco = Alto]</li>
</ul></li>
<li>Por que isso √© importante?
<ul>
<li><strong>Compliance:</strong> Essencial para setores regulados (Bancos, Sa√∫de, Seguros) que exigem justificativa para decis√µes automatizadas.</li>
<li><strong>Comunica√ß√£o:</strong> Facilita explicar o modelo para gestores n√£o t√©cnicos.</li>
</ul></li>
<li>Vejamos agora como o algoritmo constr√≥i essa estrutura.</li>
</ul>
</section>
<section id="constru√ß√£o-da-√°rvore-particionamento-recursivo" class="slide level2">
<h2>Constru√ß√£o da √°rvore (particionamento recursivo)</h2>
<ul>
<li><p><strong>Passo 1:</strong> Escolha do N√≥ Raiz</p>
<ul>
<li>Cada atributo √© utilizado para dividir os dados em grupos distintos (geralmente em dois, no CART).</li>
<li>O atributo que gera grupos mais homog√™neos da vari√°vel alvo √© escolhido como n√≥ raiz.</li>
</ul></li>
<li><p><strong>Passo 2:</strong> Cria√ß√£o de N√≥s Filhos</p>
<ul>
<li>Para cada n√≥ filho, subdivida o grupo usando o atributo que gera subgrupos mais homog√™neos. Crie n√≥s filhos para esses subgrupos.</li>
</ul></li>
<li><p><strong>Passo 3:</strong> Crit√©rio de Parada</p>
<ul>
<li>O n√≥ √© puro, atingiu profundidade m√°xima ou n√∫mero m√≠nimo de amostras.</li>
</ul></li>
<li><p><strong>Passo 4:</strong> Atribui√ß√£o de R√≥tulo √†s Folhas</p>
<ul>
<li><strong>Classifica√ß√£o:</strong> Voto majorit√°rio (Moda).</li>
<li><strong>Regress√£o:</strong> M√©dia dos valores do n√≥.</li>
</ul></li>
</ul>
</section>
<section id="constru√ß√£o-da-√°rvore" class="slide level2">
<h2>Constru√ß√£o da √°rvore</h2>
<h3 id="exemplo">Exemplo</h3>
<p>Um est√∫dio de Hollywood precisa decidir quais roteiros de autores iniciantes devem entrar em produ√ß√£o. Como n√£o h√° tempo para ler completamente cada roteiro, voc√™ decide usar um algoritmo de √°rvore de decis√£o para prever se um poss√≠vel filme se encaixaria em uma das tr√™s categorias: <strong>Sucesso de Cr√≠tica</strong>, <strong>Sucesso de P√∫blico</strong> ou <strong>Fracasso de Bilheteria</strong>.</p>
<ul>
<li>Para construir a √°rvore voc√™ considera como dados de treino os 30 lan√ßamentos recentes do est√∫dio. Rapidamente voc√™ percebe uma rela√ß√£o entre o or√ßamento estimado para as filmagens, o n√∫mero de celebridades escaladas para pap√©is principais e o n√≠vel de sucesso. Animado com essa descoberta, voc√™ produz um gr√°fico de dispers√£o para ilustrar o padr√£o:</li>
</ul>
</section>
<section id="constru√ß√£o-da-√°rvore-1" class="slide level2">
<h2>Constru√ß√£o da √°rvore</h2>

<img data-src="imagens/hollywood1.png" style="width:80.0%" class="r-stretch"></section>
<section id="constru√ß√£o-da-√°rvore-2" class="slide level2">
<h2>Constru√ß√£o da √°rvore</h2>
<ul>
<li><strong>Passo 1:</strong> Para criar o n√≥ raiz usamos o n√∫mero de celebridades no filme.</li>
</ul>

<img data-src="imagens/hollywood2.png" style="width:50.0%" class="r-stretch"></section>
<section id="constru√ß√£o-da-√°rvore-3" class="slide level2">
<h2>Constru√ß√£o da √°rvore</h2>
<ul>
<li><strong>Passo 2:</strong> Nos filmes com muitas celebridades, subdividimos entre alto e baixo or√ßamento.</li>
</ul>

<img data-src="imagens/hollywood3.png" style="width:50.0%" class="r-stretch"></section>
<section id="constru√ß√£o-da-√°rvore-4" class="slide level2">
<h2>Constru√ß√£o da √°rvore</h2>
<ul>
<li><strong>O Risco do Crescimento Ilimitado:</strong>
<ul>
<li>Poder√≠amos dividir os dados at√© que cada folha fosse 100% pura (apenas uma observa√ß√£o por folha).</li>
<li>Isso levaria ao <strong>Sobreajuste (Overfitting)</strong>: a √°rvore ‚Äúdecora‚Äù o ru√≠do dos dados de treinamento e perde a capacidade de <strong>Generaliza√ß√£o</strong>.</li>
</ul></li>
<li><strong>Equil√≠brio entre Complexidade e Erro:</strong>
<ul>
<li>√Årvores muito grandes s√£o complexas e inst√°veis.</li>
<li>√Årvores muito pequenas podem ser simplistas (Underfitting).</li>
</ul></li>
<li><strong>Nosso Crit√©rio de Parada (Heur√≠stica):</strong>
<ul>
<li>Interrompemos a divis√£o quando um n√≥ atinge <strong>80% de homogeneidade</strong> (uma classe √© amplamente majorit√°ria).</li>
</ul></li>
</ul>
</section>
<section id="constru√ß√£o-da-√°rvore-5" class="slide level2">
<h2>Constru√ß√£o da √°rvore</h2>

<img data-src="imagens/hollywood-arvore.png" style="width:55.0%" class="r-stretch"></section>
<section id="como-o-algoritmo-prop√µe-as-divis√µes" class="slide level2">
<h2>Como o algoritmo prop√µe as divis√µes?</h2>
<p>Antes de escolher o melhor atributo, o algoritmo identifica todos os pontos de divis√£o poss√≠veis:</p>
<ul>
<li><strong>Para Vari√°veis Categ√≥ricas:</strong> Testa todas as combina√ß√µes bin√°rias de grupos.
<ul>
<li><p><strong>Exemplo:</strong> Atributo Cor {üî¥, üîµ, üü¢}</p>
<ul>
<li>{üî¥} vs {üîµ, üü¢}</li>
<li>{üîµ} vs {üî¥, üü¢}</li>
<li>{üü¢} vs {üî¥, üîµ}</li>
</ul></li>
</ul></li>
<li><strong>Para Vari√°veis Num√©ricas:</strong> Os dados s√£o ordenados e os candidatos s√£o os <strong>pontos m√©dios</strong> entre valores consecutivos observados.
<ul>
<li><strong>Exemplo:</strong> Valores de Or√ßamento {1, 3, 8, 11}
<ul>
<li>Candidatos: <span class="math inline">\(\le 2.0\)</span> | <span class="math inline">\(\le 5.5\)</span> | <span class="math inline">\(\le 9.5\)</span></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="crit√©rio-de-sele√ß√£o-pureza-e-impureza" class="slide level2">
<h2>Crit√©rio de Sele√ß√£o: Pureza e Impureza</h2>
<ul>
<li>O algoritmo busca a <strong>melhor separa√ß√£o</strong>. Para isso, ele precisa medir qu√£o ‚Äúmisturados‚Äù os dados ficaram ap√≥s o corte.</li>
<li><strong>N√≥ Puro:</strong> Cont√©m apenas observa√ß√µes de uma √∫nica classe.
<ul>
<li><strong>Incerteza zero</strong>. Se cair aqui, a previs√£o √© √≥bvia.</li>
</ul></li>
<li><strong>N√≥ Impuro:</strong> Cont√©m uma mistura de classes.
<ul>
<li>O caso de m√°xima impureza ocorre quando as classes est√£o distribu√≠das igualmente (ex: 50% Sucesso / 50% Fracasso).</li>
</ul></li>
<li><strong>A Regra de Ouro:</strong> O algoritmo testa todos os candidatos a corte (vistos no slide anterior) e escolhe aquele que resulta na menor impureza m√©dia nos n√≥s filhos.</li>
</ul>
</section>
<section id="entropia-defini√ß√£o" class="slide level2">
<h2>Entropia (Defini√ß√£o)</h2>
<ul>
<li><p>A <strong>Entropia</strong> quantifica o n√≠vel de desordem ou impureza de uma parti√ß√£o (quanto maior a ‚Äúmistura‚Äù, maior a entropia).</p></li>
<li><p>Para um conjunto <span class="math inline">\(D\)</span> com <span class="math inline">\(C\)</span> classes, a entropia √© calculada como: <span class="math display">\[
\text{Entropia}(D) = - \sum_{c=1}^C p_c  \log_2(p_c),
\]</span> em que</p></li>
<li><p><span class="math inline">\(c\)</span> representa uma classe da sa√≠da (<span class="math inline">\(c=1,\ldots,C\)</span>);</p></li>
<li><p><span class="math inline">\(p_i\)</span> √© a propor√ß√£o (probabilidade) de dados pertencentes a classe <span class="math inline">\(c\)</span>;</p></li>
<li><p><span class="math inline">\(\log_2(\cdot)\)</span> √© o lograritmo na base 2.</p></li>
</ul>
</section>
<section id="entropia-propriedades" class="slide level2">
<h2>Entropia (Propriedades)</h2>
<ul>
<li><strong>Escala:</strong> Varia de <span class="math inline">\(0\)</span> (Pureza total: todos os dados s√£o da mesma classe) a <span class="math inline">\(\log_2(C)\)</span> (Impureza m√°xima: todas as classes em propor√ß√µes iguais).</li>
<li><strong>Caso Bin√°rio (<span class="math inline">\(C=2\)</span>):</strong> A entropia varia entre <span class="math inline">\(0\)</span> e <span class="math inline">\(1\)</span>.
<ul>
<li>Se <span class="math inline">\(p_1 = 1\)</span> e <span class="math inline">\(p_2 = 0\)</span>, ent√£o <span class="math inline">\(\text{Entropia} = 0\)</span> (N√≥ puro).</li>
<li>Se <span class="math inline">\(p_1 = 0,5\)</span> e <span class="math inline">\(p_2 = 0,5\)</span>, ent√£o <span class="math inline">\(\text{Entropia} = 1\)</span> (M√°xima incerteza).</li>
</ul></li>
</ul>

<img data-src="imagens/entropia.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="exemplo-12.1" class="slide level2">
<h2>Exemplo 12.1</h2>
<p>Considere um conjunto de dados de treinamento com informa√ß√µes de 30 clientes de um banco, onde 16 quitaram suas d√≠vidas (adimplentes) e 14 n√£o quitaram (inadimplentes). Para analisar a entropia, uma parti√ß√£o √© criada com base na decis√£o de se o cliente solicitou um empr√©stimo maior ou menor que R$ 50.000.</p>
<ol type="a">
<li>Dentre os clientes que solicitaram mais de R$ 50.000, 10 s√£o adimplentes e 6 s√£o inadimplentes. Calcule a entropia (grau de impureza) nessa parti√ß√£o. <span class="math display">\[
\text{Entropia}(D) = -\left[ \frac{10}{16}\,\log_2\left(\frac{10}{16}\right) + \frac{6}{16}\,\log_2\left(\frac{6}{16} \right) \right] = 0,\!9544
\]</span></li>
</ol>
<ul>
<li>O valor est√° muito pr√≥ximo de 1 (m√°xima impureza para 2 classes).</li>
<li>Isso significa que a vari√°vel ‚ÄúEmpr√©stimo &gt; 50k‚Äù, isoladamente, ainda deixa os grupos muito misturados. Precisamos de mais divis√µes!</li>
</ul>
</section>
<section id="entropia" class="slide level2">
<h2>Entropia</h2>
<ul>
<li>Podemos visualizar como a entropia varia em rela√ß√£o √† distribui√ß√£o dos exemplos quando temos duas classes.</li>
<li>Ao conhecer a propor√ß√£o de exemplos em uma classe (<span class="math inline">\(p_c\)</span>), automaticamente sabemos que a propor√ß√£o na outra classe √© (<span class="math inline">\(1-p_c\)</span>).</li>
<li>Ent√£o temos:</li>
</ul>

<img data-src="12-Arvores_de_decisao_files/figure-revealjs/unnamed-chunk-1-1.png" class="quarto-figure quarto-figure-center r-stretch" width="624"></section>
<section id="ganho-de-informa√ß√£o" class="slide level2">
<h2>Ganho de Informa√ß√£o</h2>
<ul>
<li><strong>O que √©:</strong> Uma m√©trica para selecionar qual atributo deve formar o pr√≥ximo n√≥ da √°rvore.</li>
<li><strong>L√≥gica:</strong> Mede a <strong>redu√ß√£o da incerteza</strong>. O melhor atributo √© aquele que mais ‚Äúlimpa‚Äù a confus√£o dos dados.</li>
<li><strong>C√°lculo:</strong> √â a diferen√ßa entre a entropia antes da divis√£o (Pai) e a entropia ap√≥s a divis√£o (Filhos).</li>
<li>F√≥rmula: <span class="math display">\[
\text{Ganho de Informa√ß√£o}(A) = \text{Entropia}(D_{pai}) - \text{Entropia}(D_{filhos}).
\]</span></li>
<li><strong>Objetivo:</strong> Maximizar o Ganho de Informa√ß√£o.</li>
<li><strong>Resultado:</strong> Ramos mais homog√™neos (puros) e uma √°rvore mais eficiente.</li>
</ul>
</section>
<section id="refinando-o-ganho-pesos-e-propor√ß√µes" class="slide level2">
<h2>Refinando o Ganho: Pesos e Propor√ß√µes</h2>
<h3 id="entropia-combinada-dos-filhos">1. Entropia Combinada dos Filhos</h3>
<ul>
<li><p>Como uma divis√£o gera v√°rios n√≥s, calculamos a m√©dia ponderada das entropias: <span class="math display">\[
\text{Entropia}(D_{filhos}) = \sum_{i=1}^n w_i \,\text{Entropia}(D_i)
\]</span></p></li>
<li><p><span class="math inline">\(w_i\)</span>: √â o ‚Äúpeso‚Äù do n√≥ (propor√ß√£o de dados que foi para aquele ramo).</p>
<ul>
<li>Ex: Se um ramo recebeu 20 de 30 clientes, seu peso <span class="math inline">\(w = 20/30\)</span>.</li>
</ul></li>
</ul>
</section>
<section id="refinando-o-ganho-pesos-e-propor√ß√µes-1" class="slide level2">
<h2>Refinando o Ganho: Pesos e Propor√ß√µes</h2>
<h3 id="a-armadilha-do-ganho-de-informa√ß√£o">2. A Armadilha do Ganho de Informa√ß√£o</h3>
<ul>
<li><strong>Problema:</strong> O Ganho simples tende a favorecer atributos com muitas categorias √∫nicas (ex: ID, CPF ou Datas). Eles criam parti√ß√µes ‚Äúperfeitas‚Äù, mas in√∫teis para prever novos dados.</li>
<li><strong>Solu√ß√£o (Quinlan, 1986):</strong> Usar a Taxa de Ganho (Gain Ratio), que penaliza divis√µes excessivas: <span class="math display">\[
  \text{Taxa de Ganho}(A) = \frac{\text{Ganho de Informa√ß√£o}(A)}{\text{Informa√ß√£o Intr√≠nseca}(A)}
\]</span>
<ul>
<li>Mais informa√ß√µes sobre a taxa de ganho podem ser encontradas em <em>Quinlan, J. Ross. ‚ÄúInduction of Decision Trees.‚Äù Machine Learning 1.1 (1986): 81‚Äì106.</em></li>
</ul></li>
</ul>
</section>
<section id="exemplo-12.2" class="slide level2">
<h2>Exemplo 12.2</h2>
<p>Vamos prosseguir com os dados do Exemplo 12.1. Agora, estamos prestes a criar uma parti√ß√£o no n√≥ correspondente aos clientes que solicitaram mais de R$ 50.000. Nesse ponto, enfrentamos a escolha entre dois atributos para esta nova divis√£o: o <em>grau do empr√©stimo</em> (com categorias <span class="math inline">\(A\)</span> e <span class="math inline">\(B\)</span>) e <em>posse do im√≥vel</em> (pr√≥prio ou alugado). Para determinar qual atributo ser√° utilizado na nova parti√ß√£o, √© essencial avaliar o ganho de informa√ß√£o associado a cada um deles. Calcule o ganho de informa√ß√£o baseado na imagem abaixo.</p>

<img data-src="imagens/ganho-informacao.png" style="width:60.0%" class="r-stretch"></section>
<section id="√≠ndice-de-gini-alternativa-pr√°tica" class="slide level2">
<h2>√çndice de Gini: Alternativa Pr√°tica</h2>
<ul>
<li><p><strong>O que √©:</strong> A m√©trica padr√£o do algoritmo CART. Mede a probabilidade de um elemento ser classificado incorretamente se rotularmos aleatoriamente.</p></li>
<li><p><strong>Vantagem:</strong> √â computacionalmente mais r√°pido que a Entropia (evita o c√°lculo de <span class="math inline">\(\log\)</span>).</p></li>
<li><p>F√≥rmula: <span class="math display">\[
\text{Gini}(D) = 1 - \sum_{c=1}^C p_c^2
\]</span> em que <span class="math inline">\(p_c\)</span> √© a propor√ß√£o de dados da classe <span class="math inline">\(c\)</span>.</p></li>
<li><p>O √≠ndice de Gini varia de <span class="math inline">\(0\)</span> a <span class="math inline">\((C-1)/C\)</span>.</p></li>
<li><p>Para duas classes (<span class="math inline">\(C=2\)</span>), o √≠ndice de Gini varia de <span class="math inline">\(0\)</span> a <span class="math inline">\(0,\!5\)</span>.</p>
<ul>
<li><strong>M√≠nimo (0.0):</strong> Pureza total (ex: 100% adimplentes <span class="math inline">\(\rightarrow 1 - 1^2 = 0\)</span>).</li>
<li><strong>M√°ximo (0.5):</strong> Impureza m√°xima (50/50 <span class="math inline">\(\rightarrow 1 - (0,5^2 + 0,5^2) = 0,5\)</span>).</li>
</ul></li>
</ul>
</section>
<section id="poda-da-√°rvore-pruning" class="slide level2">
<h2>Poda da √Årvore (Pruning)</h2>
<ul>
<li><p><strong>Problema:</strong> Uma √°rvore que cresce at√© a pureza total tende a sofrer de <strong>Overfitting</strong>. Ela ‚Äúdecora‚Äù o ru√≠do dos dados de treino e perde o poder de <strong>generaliza√ß√£o</strong>.</p></li>
<li><p><strong>Solu√ß√£o:</strong> Reduzir a complexidade da √°rvore atrav√©s da poda.</p></li>
<li><p><strong>Objetivo:</strong> Encontrar o ‚Äúponto ideal‚Äù onde a √°rvore √© simples o suficiente para ser interpret√°vel, mas complexa o suficiente para capturar os padr√µes reais.</p></li>
<li><p>Dois tipos de poda podem ser usados: <strong>pr√©-poda</strong> <strong>p√≥s-poda</strong>.</p></li>
</ul>
</section>
<section id="pr√©-poda-early-stopping" class="slide level2">
<h2>Pr√©-poda (Early Stopping)</h2>
<ul>
<li>Ocorre <strong>durante</strong> a constru√ß√£o. O algoritmo decide n√£o dividir um n√≥ se certas condi√ß√µes forem atendidas:
<ul>
<li><strong>Profundidade M√°xima:</strong> Ex: ‚ÄúN√£o passe de 5 n√≠veis‚Äù.</li>
<li><strong>M√≠nimo de Amostras por N√≥:</strong> Ex: ‚ÄúN√£o divida n√≥s com menos de 20 clientes‚Äù.</li>
<li><strong>Ganho M√≠nimo:</strong> Ex: ‚ÄúS√≥ divida se o Ganho de Informa√ß√£o for <span class="math inline">\(&gt; 0.05\)</span>‚Äù.</li>
</ul></li>
<li><strong>Vantagem:</strong> Muito r√°pida e eficiente.</li>
<li><strong>Desvantagem:</strong> Pode ser simplista demais (Underfitting).</li>
</ul>
</section>
<section id="p√≥s-poda-post-pruning" class="slide level2">
<h2>P√≥s-poda (Post-pruning)</h2>
<ul>
<li>Deixa a √°rvore atingir sua <strong>complexidade m√°xima</strong> e depois ‚Äúcorta‚Äù os ramos que contribuem pouco para a acur√°cia.</li>
<li><strong>Estrat√©gia:</strong> Substitui um sub-ramo inteiro por um √∫nico n√≥ folha.</li>
<li><strong>Vantagem:</strong> Mais robusta. Ela permite que o algoritmo descubra rela√ß√µes complexas que s√≥ aparecem ap√≥s v√°rias divis√µes.</li>
<li><strong>M√©trica comum:</strong> Cost-Complexity Pruning (usada no algoritmo CART).</li>
</ul>
</section>
<section id="exemplo-12.3" class="slide level2">
<h2>Exemplo 12.3</h2>
<p>Considere os dados abaixo e construa uma √°rvore de decis√£o para a vari√°vel <em>sair</em> usando a entropia para quantificar a impureza.</p>
<table class="caption-top">
<colgroup>
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Tempo</th>
<th style="text-align: left;">Temp.</th>
<th style="text-align: left;">FDS</th>
<th style="text-align: left;">Jogar?</th>
<th style="text-align: left;">Tempo</th>
<th style="text-align: left;">Temp.</th>
<th style="text-align: left;">FDS</th>
<th style="text-align: left;">Jogar?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Ensolarado</td>
<td style="text-align: left;">Quente</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">Ensolarado</td>
<td style="text-align: left;">Quente</td>
<td style="text-align: left;">N√£o</td>
<td style="text-align: left;">N√£o</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chuvoso</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">N√£o</td>
<td style="text-align: left;">N√£o</td>
<td style="text-align: left;">Chuvoso</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">Sim</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Chuvoso</td>
<td style="text-align: left;">Quente</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">N√£o</td>
<td style="text-align: left;">Ensolarado</td>
<td style="text-align: left;">Quente</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">Sim</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ensolarado</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">N√£o</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">Chuvoso</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">N√£o</td>
<td style="text-align: left;">N√£o</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Chuvoso</td>
<td style="text-align: left;">Quente</td>
<td style="text-align: left;">N√£o</td>
<td style="text-align: left;">N√£o</td>
<td style="text-align: left;">Ensolarado</td>
<td style="text-align: left;">Quente</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">Sim</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ensolarado</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">Chuvoso</td>
<td style="text-align: left;">Moderado</td>
<td style="text-align: left;">N√£o</td>
<td style="text-align: left;">N√£o</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Chuvoso</td>
<td style="text-align: left;">Quente</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">Ensolarado</td>
<td style="text-align: left;">Quente</td>
<td style="text-align: left;">Sim</td>
<td style="text-align: left;">Sim</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>FDS: fim de semana.<span class="math inline">\(\quad\)</span>Temp.: temperatura.</p>
</section>
<section id="algoritmos" class="slide level2">
<h2>Algoritmos</h2>
<ul>
<li><p>Existem diversos algoritmos de √°rvores de decis√£o, cada um com suas caracter√≠sticas espec√≠ficas e m√©todos de constru√ß√£o. Alguns s√£o mais adequados para determinados tipos de problemas ou conjuntos de dados do que outros.</p></li>
<li><p>Nesta aula veremos os algoritmos:</p>
<ul>
<li>CART (<em>Classification and Regression Trees</em>)</li>
<li>C5.0</li>
</ul></li>
<li><p>Outros algoritmos podem ser encontrados em <a href="https://topepo.github.io/caret/available-models.html">https://topepo.github.io/caret/available-models.html</a></p></li>
</ul>
</section>
<section id="algoritmo-cart-classification-and-regression-tree" class="slide level2">
<h2>Algoritmo CART (Classification And Regression Tree)</h2>
<ul>
<li><p><strong>Origem:</strong> Proposto por Breiman, Friedman, Olshen e Stone (1984). √â o ‚Äúpadr√£o ouro‚Äù das √°rvores modernas.</p></li>
<li><p><strong>Estrutura Estritamente Bin√°ria:</strong> Diferente de outros algoritmos, o CART <strong>sempre</strong> divide um n√≥ em exatamente dois filhos (Esquerda/Direita).</p></li>
<li><p><strong>Crit√©rios de Divis√£o (Splitting Criteria):</strong></p>
<ul>
<li><p><strong>√Årvores de Classifica√ß√£o (Alvo Categ√≥rico):</strong> Busca minimizar a impureza usando o <strong>√çndice de Gini</strong>.</p></li>
<li><p><strong>√Årvores de Regress√£o (Alvo Num√©rico):</strong> Busca a <strong>Redu√ß√£o da Vari√¢ncia</strong> (minimiza a Soma dos Quadrados dos Res√≠duos - RSS) dentro de cada n√≥.</p></li>
</ul></li>
</ul>
</section>
<section id="algoritmo-cart-vantagens" class="slide level2">
<h2>Algoritmo CART: Vantagens</h2>
<ul>
<li><strong>Robustez a Dados Ausentes (Surrogate Splits):</strong> Grande diferencial do CART. Se um dado falta, ele usa ‚Äúvari√°veis substitutas‚Äù (altamente correlacionadas com a principal) para decidir o caminho, sem perder a observa√ß√£o.</li>
<li><strong>Interpretabilidade (Caixa Branca):</strong> Gera regras l√≥gicas claras e requer pouco pr√©-processamento (n√£o exige normaliza√ß√£o dos dados).</li>
<li><strong>Sele√ß√£o Impl√≠cita de Atributos:</strong> Vari√°veis irrelevantes simplesmente n√£o s√£o selecionadas para os cortes.</li>
<li><strong>Resili√™ncia a Outliers (nos preditores):</strong> Como a divis√£o √© baseada em rank (ordena√ß√£o) e n√£o em dist√¢ncia, outliers nas vari√°veis explicativas isoladas t√™m pouco impacto na estrutura.</li>
</ul>
</section>
<section id="algoritmo-cart-desvantagens" class="slide level2">
<h2>Algoritmo CART: Desvantagens</h2>
<ul>
<li><strong>Alta Vari√¢ncia (Instabilidade):</strong> √â sens√≠vel aos dados de treino. Uma pequena altera√ß√£o na amostra pode gerar uma √°rvore completamente diferente.
<ul>
<li><em>Solu√ß√£o:</em> Utilizar m√©todos de Ensemble (ex: Random Forest).</li>
</ul></li>
<li><strong>Tend√™ncia ao Sobreajuste (Overfitting):</strong> Sem poda (pruning), a √°rvore cresce at√© decorar o ru√≠do dos dados.</li>
<li><strong>Vi√©s de Cardinalidade:</strong> Tende a favorecer vari√°veis com muitas categorias/n√≠veis distintos, caso n√£o sejam tratados.</li>
<li><strong>Fronteiras Ortogonais:</strong> As divis√µes s√£o sempre retangulares (paralelas aos eixos), o que dificulta capturar rela√ß√µes diagonais complexas.</li>
</ul>
</section>
<section id="algoritmo-c5.0" class="slide level2">
<h2>Algoritmo C5.0</h2>
<ul>
<li>Criado por Ross Quinlan. √â a vers√£o comercial e otimizada do C4.5 (sucessor do ID3).</li>
<li>Projetado especificamente para problemas de Classifica√ß√£o.</li>
<li><strong>Estrutura de Divis√£o (Multi-way Splits):</strong> Diferente do CART (bin√°rio), o C5.0 pode gerar m√∫ltiplos ramos em um √∫nico n√≥ para vari√°veis categ√≥ricas (ex: um ramo para cada UF).</li>
<li><strong>Crit√©rio de Sele√ß√£o:</strong> Utiliza a <strong>Taxa de Ganho (Gain Ratio)</strong> para reduzir o vi√©s da Entropia em dire√ß√£o a atributos com muitas categorias.</li>
</ul>
</section>
<section id="algoritmo-c5.0-vantagens" class="slide level2">
<h2>Algoritmo C5.0: Vantagens</h2>
<ul>
<li><strong>Performance Superior:</strong> Extremamente r√°pido e eficiente em mem√≥ria (significativamente melhor que o C4.5).</li>
<li><strong>Suporte Nativo a Boosting:</strong> Permite criar um ensemble de √°rvores para aumentar a precis√£o de previs√µes dif√≠ceis.</li>
<li><strong>Winnowing (Sele√ß√£o de Atributos):</strong> Possui um mecanismo avan√ßado para ‚Äúlimpar‚Äù preditores in√∫teis antes de construir a √°rvore.</li>
<li><strong>Poda Global (Global Pruning):</strong> Realiza uma poda p√≥s-constru√ß√£o baseada em intervalos de confian√ßa binomiais, tornando o modelo final mais generalista.</li>
</ul>
</section>
<section class="slide level2">

<h3 id="algoritmo-c5.0-desvantagens">Algoritmo C5.0: Desvantagens</h3>
<ul>
<li>N√£o realiza Regress√£o (vari√°vel resposta deve ser sempre categ√≥rica).</li>
<li><strong>‚Äú√Årvores‚ÄùLargas‚Äù:</strong> Devido √†s divis√µes m√∫ltiplas (multi-way splits), a √°rvore pode ficar muito larga e dif√≠cil de visualizar em compara√ß√£o √†s √°rvores bin√°rias do CART.</li>
<li><strong>Complexidade de Interpreta√ß√£o com Boosting:</strong> Se a fun√ß√£o de Boosting for ativada, a interpretabilidade (regras simples) √© sacrificada em troca de acur√°cia, aproximando-se de uma ‚Äúcaixa preta‚Äù.</li>
</ul>
</section>
<section id="agora-vamos-fazer-no-r" class="title-slide slide level1 center">
<h1>Agora vamos fazer no R‚Ä¶</h1>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="imagens/ufs_horizontal_positiva.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'fast',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        // Bounds for smallest/largest possible scale to apply to content
        minScale: 0.2,

        maxScale: 2,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copiada");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copiada");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>